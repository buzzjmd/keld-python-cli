[tox]
envlist = 
    lint
    {py27,py36}-info

[testenv]
basepython =
    {py}: {env:TOXPYALL:{env:TOXPY:python}}
    {py2}: {env:TOXPYALL:{env:TOXPY2:python2}}
    {py27}: {env:TOXPYALL:python2.7}
    {py3,lint}: {env:TOXPYALL:{env:TOXPY3:python3}}
    {py36}: {env:TOXPYALL:python3.6}
usedevelop=True
deps =
    pytest
    pytest-cov
commands =
    {info}: python -c "import os; print('\{basepython\}={basepython}')"
    {info}: python --version
    python -m keldcli
    pytest --cov-report html --cov keldcli --verbose tests
    coverage report --show-missing --fail-under=100

[testenv:lint]
deps =
    flake8
commands =
    python --version
    flake8 src/keldcli tests setup.py
